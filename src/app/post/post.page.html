<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
    <ion-card>
        <ion-row justify-content-center>
            <ion-col align-self-center size-md="6" size-lg="5" size-xs="12">
        <form #form="ngForm" novalidate (ngSubmit)="onSavePost(form)" >

            <ion-input
            type="text"
            required
            [(ngModel)]="title"
            ngModel
            #titleInput="ngModel"
            name="title"
            placeholder="Title">
            </ion-input>

                <ion-input
                type="text"
                rows="4"
                required
                [(ngModel)]="content"
                ngModel
                #contentInput="ngModel"
                name="content"
                placeholder="Post Content"
                ></ion-input>

            <ion-select
            required
            [(ngModel)]="cname"
            ngModel
            placeholder="Category"
            #cnameInput = "ngModel"
            name = "cname">

            <ion-select-option *ngFor="let category of categories" [value]="category">
            {{category}}
            </ion-select-option>

            </ion-select>

            <ion-button
                    type="submit">Save Post</ion-button>
        </form>
            </ion-col></ion-row>
    </ion-card>


    <ion-card *ngFor="let post of posts">

        <ion-card-header>
            <ion-list style="list-style: none; display: flex;">
                <ion-item lines="none">
                    <ion-avatar slot="start">
                        <!--<img [src]= "post.profileimg">-->
                        <img [src]= "post.profileimg.replace('localhost', '192.168.10.7')">
                    </ion-avatar>
                </ion-item>
                <ion-item>
                    <ion-card-title>{{post.username}}</ion-card-title>
                </ion-item>

           <ion-item>
            <ion-card-subtitle>{{ post.title }}</ion-card-subtitle>
           </ion-item>
            </ion-list>
        </ion-card-header>
        <!--<img [hidden]="!post.imagePath" [src]="post.imagePath" [alt]="post.title" >-->
        <img  *ngIf="post.imagePath" [hidden]="!post.imagePath" [src]="post.imagePath.replace('localhost', '192.168.10.7')" [alt]="post.title" >
        <ion-card-content>
            <strong>{{post.content}}</strong>
            <br/>
            <strong>Date: </strong>{{ post.createdAt | date:'MMM dd, yyyy' }}
        </ion-card-content>
    </ion-card>
</ion-content>
